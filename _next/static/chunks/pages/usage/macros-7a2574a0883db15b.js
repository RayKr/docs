(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{9586:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/usage/macros",function(){return t(664)}])},8076:function(e,a,t){"use strict";var n=t(1527),i=t(5903),s=t.n(i);t(959);var d=t(7634),r=t(1689);let l=(0,n.jsxs)("span",{className:"jsx-ce537a1fc447edae",children:[(0,n.jsx)("img",{src:"/logo.png",className:"jsx-ce537a1fc447edae"}),"Mix Space",(0,n.jsx)(s(),{id:"ce537a1fc447edae",children:"span.jsx-ce537a1fc447edae{padding:.5rem .5rem .5rem 0;-webkit-mask-image:-webkit-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-webkit-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-moz-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:-o-linear-gradient(30deg,black 25%,rgba(0,0,0,.2)50%,black 75%);mask-image:linear-gradient(60deg,black 25%,rgba(0,0,0,.2)50%,black 75%);-webkit-mask-size:400%;mask-size:400%;-webkit-mask-position:0%;mask-position:0%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:16px;font-weight:600}img.jsx-ce537a1fc447edae{margin-right:8px;height:24px}span.jsx-ce537a1fc447edae:hover{-webkit-mask-position:100%;mask-position:100%;-webkit-transition:mask-position 1s ease,-webkit-mask-position 1s ease;-moz-transition:mask-position 1s ease,-webkit-mask-position 1s ease;-o-transition:mask-position 1s ease,-webkit-mask-position 1s ease;transition:mask-position 1s ease,-webkit-mask-position 1s ease}"})]}),o={logo:l,head:function(){let{title:e}=(0,d.ZR)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("link",{rel:"dns-prefetch",href:"//pan.vinua.cn"}),(0,n.jsx)("meta",{name:"msapplication-TileColor",content:"#fff"}),(0,n.jsx)("meta",{name:"theme-color",content:"#fff"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,n.jsx)("meta",{name:"description",content:"A flexible, modular CMS Blog System."}),(0,n.jsx)("meta",{name:"og:description",content:"A flexible, modular CMS Blog System."}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:site:domain",content:"mog.js.org"}),(0,n.jsx)("meta",{name:"twitter:url",content:"https://mog.js.org"}),(0,n.jsx)("meta",{name:"og:title",content:e?e+" | Mix Space":"Mix Space"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Mix Space"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.png",type:"image/png"})]})},project:{link:"https://github.com/mx-space/core"},docsRepositoryBase:"https://github.com/mx-space/docs/blob/main",footer:{text:(0,n.jsx)("div",{className:"flex w-full flex-col items-center sm:items-start",children:(0,n.jsxs)("p",{className:"text-xs",children:["\xa9 ",new Date().getFullYear()," This project is licensed under AGPLv3 with additional terms, and this documentation is licensed under CC BY 4.0. All licensed. 2021-present Mix Space Team"]})})},useNextSeoProps(){let{asPath:e}=(0,r.useRouter)();if("/"!==e)return{titleTemplate:"%s | Mix Space"}},editLink:{text:"Edit this page on GitHub →"},banner:{key:"theme-shiro",text:(0,n.jsx)("a",{href:"https://mx-space.js.org/themes/shiro",target:"_blank",children:"\uD83C\uDFA8 New Mix Space theme `Shiro` is released. Read more →"})}};a.Z=o},664:function(e,a,t){"use strict";t.r(a);var n=t(1527),i=t(985),s=t(7634),d=t(8076);t(9941),t(1365);var r=t(6736);t(8823);var l=t(5032);let o={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}=Object.assign({},(0,r.ah)(),e.components);return a?(0,n.jsx)(a,{...e,children:(0,n.jsx)(c,{...e})}):c(e)},pageOpts:{filePath:"pages/usage/macros.mdx",route:"/usage/macros",headings:[{depth:1,value:"文本宏",id:"文本宏"},{depth:2,value:"简介",id:"简介"},{depth:2,value:"语法格式",id:"语法格式"},{depth:3,value:"访问变量",id:"访问变量"},{depth:3,value:"使用函数",id:"使用函数"}],pageMap:[{kind:"Meta",data:{index:{type:"page",title:"Mix Space",display:"hidden",theme:{layout:"raw"}},docs:{type:"page",title:"部署文档"},usage:{type:"page",title:"使用指南"},themes:{type:"page",title:"前端主题",theme:{layout:"raw"}},development:{title:"系统开发",type:"page"}}},{kind:"Folder",name:"development",route:"/development",children:[{kind:"Meta",data:{index:"前言",frontend:"前端开发指南",admin:"后台单独部署"}},{kind:"MdxPage",name:"admin",route:"/development/admin"},{kind:"MdxPage",name:"frontend",route:"/development/frontend"},{kind:"MdxPage",name:"index",route:"/development"}]},{kind:"Folder",name:"docs",route:"/docs",children:[{kind:"Meta",data:{index:"引言",features:"主要功能","-- advanced":{type:"separator",title:"部署"},docker:"Docker 部署",scripts:"预设脚本部署",advanced:"进阶部署",extra:"相关内容",community:"社区分享"}},{kind:"MdxPage",name:"advanced",route:"/docs/advanced"},{kind:"MdxPage",name:"community",route:"/docs/community"},{kind:"MdxPage",name:"docker",route:"/docs/docker"},{kind:"MdxPage",name:"extra",route:"/docs/extra"},{kind:"MdxPage",name:"features",route:"/docs/features"},{kind:"MdxPage",name:"index",route:"/docs",frontMatter:{title:"引言"}},{kind:"MdxPage",name:"scripts",route:"/docs/scripts"}]},{kind:"MdxPage",name:"index",route:"/",frontMatter:{title:"Mix Space - An Alternative Personal Space."}},{kind:"Folder",name:"themes",route:"/themes",children:[{kind:"Meta",data:{index:{title:"主题目录"},shiro:{title:"部署 Shiro 主题",theme:{layout:"default"}},kami:{title:"部署 Kami 主题",theme:{layout:"default"}},yun:{title:"部署 Yun 主题",theme:{layout:"default"}}}},{kind:"MdxPage",name:"index",route:"/themes",frontMatter:{title:"前端主题"}},{kind:"MdxPage",name:"kami",route:"/themes/kami"},{kind:"Folder",name:"shiro",route:"/themes/shiro",children:[{kind:"Meta",data:{index:"部署主题",extra:"额外功能",config:"Config"}},{kind:"MdxPage",name:"config",route:"/themes/shiro/config"},{kind:"MdxPage",name:"extra",route:"/themes/shiro/extra"},{kind:"MdxPage",name:"index",route:"/themes/shiro"}]},{kind:"MdxPage",name:"yun",route:"/themes/yun"}]},{kind:"Folder",name:"usage",route:"/usage",children:[{kind:"Meta",data:{index:"使用指南","-- built-in":{type:"separator",title:"官方指南"},macros:"文本宏",serverless:"云函数",xlog:"xLog 集成",search:"Algolia Search",backup:"备份与回滚",update:"更新 Mix Space",security:"Key 加密与安全性","-- community":{type:"separator",title:"社区使用指南"}}},{kind:"MdxPage",name:"backup",route:"/usage/backup"},{kind:"MdxPage",name:"index",route:"/usage"},{kind:"MdxPage",name:"macros",route:"/usage/macros"},{kind:"MdxPage",name:"search",route:"/usage/search"},{kind:"MdxPage",name:"security",route:"/usage/security"},{kind:"MdxPage",name:"serverless",route:"/usage/serverless"},{kind:"MdxPage",name:"update",route:"/usage/update"},{kind:"MdxPage",name:"xlog",route:"/usage/xlog"}]}],flexsearch:{codeblocks:!1},title:"文本宏"},pageNextRoute:"/usage/macros",nextraLayout:s.ZP,themeConfig:d.Z};function c(e){let a=Object.assign({h1:"h1",p:"p",h2:"h2",strong:"strong",code:"code",pre:"pre",span:"span",h3:"h3",ul:"ul",li:"li",a:"a"},(0,r.ah)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h1,{children:"文本宏"}),"\n","\n",(0,n.jsxs)(l.UW,{type:"warning",children:[(0,n.jsx)(a.p,{children:"这是一个实验性特征，可能会造成系统的不稳定。"}),(0,n.jsx)(a.p,{children:"经过测试，使用大量文本宏会造成请求文章的接口变慢。"})]}),"\n",(0,n.jsx)(a.h2,{id:"简介",children:"简介"}),"\n",(0,n.jsx)(l.UW,{type:"info",children:(0,n.jsx)(a.p,{children:"使用此功能需要先在后台中开启，设置 - 系统 - 文本设定 - 文本宏替换。"})}),"\n",(0,n.jsxs)(a.p,{children:["Required: ",(0,n.jsx)(a.strong,{children:"mx-server >=3.26.0"})]}),"\n",(0,n.jsxs)(a.p,{children:["文本宏是一个以 ",(0,n.jsx)(a.code,{children:"[[ ]]"})," 包裹的语法，例如 ",(0,n.jsx)(a.code,{children:"[[ $created ]]"})," 是一个合法的语法。在文章中可以插入文本宏，和 Markdown 一样，但是这个语法不是用 Markdown 解析和渲染，而是直接会在服务端进行替换。因此可以通过这个特征在文章中插入一些来自服务端的数据，也可以执行一些函数。"]}),"\n",(0,n.jsx)(a.p,{children:"例如说一篇文章的标题为「实例标题」，他的正文内容为："}),"\n",(0,n.jsx)(a.pre,{"data-language":"/[[","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"/[[","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"一个句子。[[ $title ]]"})})})}),"\n",(0,n.jsx)(a.p,{children:"将会输出："}),"\n",(0,n.jsx)(a.pre,{"data-language":"md","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"md","data-theme":"default",children:(0,n.jsxs)(a.span,{className:"line",children:[(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"一个句子。"}),(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},className:"highlighted",children:"实例标题"})]})})}),"\n",(0,n.jsx)(a.p,{children:"又比如说："}),"\n",(0,n.jsx)(a.pre,{"data-language":"md","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"md","data-theme":"default",children:(0,n.jsxs)(a.span,{className:"line",children:[(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:'<p align="right">更新于 '}),(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},className:"highlighted",children:"[[ #dayjs($modified).format('YY-MM') ]]"}),(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"</p>"})]})})}),"\n",(0,n.jsx)(a.p,{children:"将会输出："}),"\n",(0,n.jsx)(a.pre,{"data-language":"md","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"md","data-theme":"default",children:(0,n.jsxs)(a.span,{className:"line",children:[(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:'<p align="right">更新于 '}),(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},className:"highlighted",children:"22-04"}),(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"</p>"})]})})}),"\n",(0,n.jsxs)(a.p,{children:["这是一个动态的数据，",(0,n.jsx)(a.code,{children:"dayjs"})," 函数由服务端提供。"]}),"\n",(0,n.jsx)(l.UW,{type:"warning",children:(0,n.jsx)(a.p,{children:"所有的函数方法均在服务端执行，请注意内存的泄露造成系统的不稳定。"})}),"\n",(0,n.jsx)(a.h2,{id:"语法格式",children:"语法格式"}),"\n",(0,n.jsxs)(a.p,{children:["以 ",(0,n.jsx)(a.code,{children:"[[ "})," 开头，",(0,n.jsx)(a.code,{children:" ]]"})," 结尾，注意一个空格是必须的。"]}),"\n",(0,n.jsx)(a.h3,{id:"访问变量",children:"访问变量"}),"\n",(0,n.jsxs)(a.p,{children:["访问变量使用 ",(0,n.jsx)(a.code,{children:"$"})," 前缀。目前可以访问的变量有：当前记录的所有字段（数据库记录值）比如说：",(0,n.jsx)(a.code,{children:"title"})," ",(0,n.jsx)(a.code,{children:"created"})," ",(0,n.jsx)(a.code,{children:"slug"})," ",(0,n.jsx)(a.code,{children:"nid"})," ",(0,n.jsx)(a.code,{children:"_id"})," .."]}),"\n",(0,n.jsxs)(a.p,{children:["你可以像这样来调用变量：",(0,n.jsx)(a.code,{children:"[[ $created ]]"})]}),"\n",(0,n.jsx)(a.h3,{id:"使用函数",children:"使用函数"}),"\n",(0,n.jsx)(l.UW,{type:"warning",children:(0,n.jsx)(a.p,{children:"函数的执行行为和云函数的执行行为保持一致。"})}),"\n",(0,n.jsxs)(a.p,{children:["执行函数使用 ",(0,n.jsx)(a.code,{children:"#"})," 前缀。你可以使用任意 JS 代码去执行一个函数，也可以是一个 JS 语句。"]}),"\n",(0,n.jsx)(a.p,{children:"如："}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"[[ #$title.slice(0, 5) ]]"})})})}),"\n",(0,n.jsx)(a.p,{children:"使用内置方法。"}),"\n",(0,n.jsx)(a.p,{children:"如："}),"\n",(0,n.jsx)(a.pre,{"data-language":"text","data-theme":"default",hasCopyCode:!0,children:(0,n.jsx)(a.code,{"data-language":"text","data-theme":"default",children:(0,n.jsx)(a.span,{className:"line",children:(0,n.jsx)(a.span,{style:{color:"var(--shiki-color-text)"},children:"[[ #dayjs($created).format('YYYY') ]]"})})})}),"\n",(0,n.jsx)(a.p,{children:"内置方法目前有："}),"\n",(0,n.jsxs)(a.ul,{children:["\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.a,{href:"https://day.js.org/zh-CN/",children:"dayjs"})," —— 日期处理"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"formatNow(time: Date | string): string"})," —— 相对时间"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"center(text: string): string"})," —— 居中"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"right(text: string): string"})," —— 居右"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"opacity(text: string, opacity: number): string"})," —— 透明文本"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"blur(text: string, blur: number): string"})," —— 高斯模糊化文字"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"color(text: string, color: string): string"})," —— 给文字上色"]}),"\n",(0,n.jsxs)(a.li,{children:[(0,n.jsx)(a.code,{children:"size(text: string): string"})," —— 给文字上色"]}),"\n"]})]})}a.default=(0,i.j)(o)}},function(e){e.O(0,[163,774,888,179],function(){return e(e.s=9586)}),_N_E=e.O()}]);