(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{874:function(e,s,t){"use strict";var r=t(6935),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,s){var t,o,a,l,i,c,d,h,p=!1;s||(s={}),a=s.debug||!1;try{if(i=r(),c=document.createRange(),d=document.getSelection(),(h=document.createElement("span")).textContent=e,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(t){if(t.stopPropagation(),s.format){if(t.preventDefault(),void 0===t.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=n[s.format]||n.default;window.clipboardData.setData(r,e)}else t.clipboardData.clearData(),t.clipboardData.setData(s.format,e)}s.onCopy&&(t.preventDefault(),s.onCopy(t.clipboardData))}),document.body.appendChild(h),c.selectNodeContents(h),d.addRange(c),!document.execCommand("copy"))throw Error("copy command was unsuccessful");p=!0}catch(r){a&&console.error("unable to copy using execCommand: ",r),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(s.format||"text",e),s.onCopy&&s.onCopy(window.clipboardData),p=!0}catch(r){a&&console.error("unable to copy using clipboardData: ",r),a&&console.error("falling back to prompt"),t="message"in s?s.message:"Copy to clipboard: #{key}, Enter",o=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",l=t.replace(/#{\s*key\s*}/g,o),window.prompt(l,e)}}finally{d&&("function"==typeof d.removeRange?d.removeRange(c):d.removeAllRanges()),h&&document.body.removeChild(h),i()}return p}},635:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/docker",function(){return t(9069)}])},584:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(1527),n=t(959),o=t(874),a=t.n(o);function l(e){let{variableNames:s}=e,[t,o]=(0,n.useState)(Array(s.length).fill("")),l=(e,s)=>{let r=[...t];r[e]=s,o(r)};return(0,r.jsxs)("div",{className:"p-4 mt-2",children:[s.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("input",{type:"text",className:"border rounded px-2 py-2 w-1/2 bg-transparent focus:outline-none focus:border-black hover:border-white-400 transition duration-300 font-[400] font-sans text-sm cursor-not-allowed",value:e.name||e.key,"data-tip":e.key,onMouseOver:e=>{e.target.style.color="transparent",setTimeout(()=>{e.target.style.color="inherit",e.target.value=e.target.dataset.tip},300)},onMouseLeave:s=>{s.target.style.color="transparent",setTimeout(()=>{s.target.style.color="inherit",s.target.value=e.name||e.key},300)},disabled:!0}),(0,r.jsx)("input",{type:"text",className:"border rounded px-2 py-2 w-1/2 focus:outline-none focus:border-black hover:border-gray-400 transition duration-300 font-[400] font-sans text-sm",style:{outline:"none",boxShadow:"none"},placeholder:"Enter value...",value:t[s],onChange:e=>l(s,e.target.value)})]},"".concat(e.key))),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"sr-only",children:"环境变量配置"}),(0,r.jsx)("button",{type:"button",className:"border bg-black w-full text-white px-4 py-2 rounded-lg text-sm transform transition-all duration-300 focus:outline-none hover:bg-gray-700",onClick:()=>{let e=s.map((e,s)=>"".concat(e.key,"=").concat(t[s])).join("\n");a()(e)},children:"复制"})]})]})}},9069:function(e,s,t){"use strict";t.r(s);var r=t(1527),n=t(2027),o=t(6736);t(421);var a=t(9173),l=t(584);function i(e){let s=Object.assign({h1:"h1",h3:"h3",p:"p",pre:"pre",code:"code",span:"span",blockquote:"blockquote",ul:"ul",li:"li",strong:"strong",a:"a"},(0,o.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{children:"Docker 部署"}),"\n","\n",(0,r.jsxs)(a.Rg,{children:[(0,r.jsx)(s.h3,{id:"安装-docker",children:"安装 Docker"}),(0,r.jsx)(s.p,{children:"如果你的服务器在国内，建议使用阿里云的镜像加速器，安装命令如下："}),(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-fsSL"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://get.docker.com"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-s"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"docker"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--mirror"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"Aliyun"})]})})}),(0,r.jsx)(s.p,{children:"在国外，可以直接使用官方脚本安装："}),(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-fsSL"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://get.docker.com"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-s"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"docker"})]})})}),(0,r.jsx)(s.h3,{id:"拉取配置文件",children:"拉取配置文件"}),(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"&&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-p"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"mx-space/core"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"&&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $_"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# 拉取docker-compose.yml 文件"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"wget"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://fastly.jsdelivr.net/gh/mx-space/core@master/docker-compose.yml"})]})]})}),(0,r.jsx)(s.h3,{id:"配置-core-启动配置文件",children:"配置 Core 启动配置文件"}),(0,r.jsxs)(s.p,{children:["在下方的表格里填入你的配置，然后点击复制，创建一个 ",(0,r.jsx)(s.code,{children:".env"})," 文件，将复制的内容粘贴进去，保存即可。"]}),(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"鼠标悬停在下方的表格中，可以查看对应的配置项名字。"}),"\n"]}),(0,r.jsx)(l.C,{variableNames:[{key:"JWT_SECRET",name:"[JWT 密钥] 长度不小于 16 个字符，不大于 32 个字符"},{key:"ALLOWED_ORIGINS",name:"[被允许的域名] 如果允许多个域名访问，用英文逗号，分隔"},{key:"ENCRYPT_ENABLE",name:"[是否开启加密] true 为开启，false 为关闭"},{key:"ENCRYPT_KEY",name:"[加密密钥] 详情请见下方提示"}]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"JWT 密钥"})}),"：需要填写长度不小于 16 个字符，不大于 32 个字符的字符串，用于加密用户的 JWT，务必保存好自己的密钥，不要泄露给他人。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"被允许的域名"})}),"：需要填写被允许的域名，通常是前端的域名，如果允许多个域名访问，用英文逗号，分隔。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"是否开启加密"})}),"：如果你确定要开启加密，将 false 改为 true，开启加密后，你需要在下方填写加密密钥。"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"加密密钥"})}),"：具体内容可参考 ",(0,r.jsx)(s.a,{href:"https://mx-space.js.org/feature/security.html",children:"https://mx-space.js.org/feature/security.html"})]}),"\n"]}),(0,r.jsx)(a.UW,{type:"warning",children:(0,r.jsxs)(s.p,{children:["若开启加密，则需注意密钥长度",(0,r.jsx)(s.strong,{children:"必须为 64 位"}),"，不然会在初始化时报错。注意这是",(0,r.jsx)(s.strong,{children:"不可逆"}),"的，务必保存自己的秘钥。所以并不是非常推荐使用，除非你真的需要加密，"]})}),(0,r.jsx)(s.h3,{id:"启动-core",children:"启动 Core"}),(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,r.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"docker-compose"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),(0,r.jsx)(s.h3,{id:"完成",children:"完成"}),(0,r.jsx)(s.p,{children:"恭喜你完成了 Core 部署，不过仅仅如此是不够的，你需要对 Core 进行初始化等等，尽情探索吧！"})]})]})}s.default=(0,n.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(i,{...e})}):i(e)},pageOpts:{filePath:"pages/docs/docker.mdx",route:"/docs/docker",headings:[{depth:1,value:"Docker 部署",id:"docker-部署"},{depth:3,value:"安装 Docker",id:"安装-docker"},{depth:3,value:"拉取配置文件",id:"拉取配置文件"},{depth:3,value:"配置 Core 启动配置文件",id:"配置-core-启动配置文件"},{depth:3,value:"启动 Core",id:"启动-core"},{depth:3,value:"完成",id:"完成"}],title:"Docker 部署"},pageNextRoute:"/docs/docker"})},6935:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var s=document.activeElement,t=[],r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));switch(s.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":s.blur();break;default:s=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach(function(s){e.addRange(s)}),s&&s.focus()}}}},function(e){e.O(0,[48,774,888,179],function(){return e(e.s=635)}),_N_E=e.O()}]);