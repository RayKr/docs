(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{874:function(e,s,r){"use strict";var t=r(6935),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,s){var r,o,a,l,i,c,d,h,x=!1;s||(s={}),a=s.debug||!1;try{if(i=t(),c=document.createRange(),d=document.getSelection(),(h=document.createElement("span")).textContent=e,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(r){if(r.stopPropagation(),s.format){if(r.preventDefault(),void 0===r.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var t=n[s.format]||n.default;window.clipboardData.setData(t,e)}else r.clipboardData.clearData(),r.clipboardData.setData(s.format,e)}s.onCopy&&(r.preventDefault(),s.onCopy(r.clipboardData))}),document.body.appendChild(h),c.selectNodeContents(h),d.addRange(c),!document.execCommand("copy"))throw Error("copy command was unsuccessful");x=!0}catch(t){a&&console.error("unable to copy using execCommand: ",t),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(s.format||"text",e),s.onCopy&&s.onCopy(window.clipboardData),x=!0}catch(t){a&&console.error("unable to copy using clipboardData: ",t),a&&console.error("falling back to prompt"),r="message"in s?s.message:"Copy to clipboard: #{key}, Enter",o=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",l=r.replace(/#{\s*key\s*}/g,o),window.prompt(l,e)}}finally{d&&("function"==typeof d.removeRange?d.removeRange(c):d.removeAllRanges()),h&&document.body.removeChild(h),i()}return x}},5539:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/docker",function(){return r(5922)}])},8537:function(e,s,r){"use strict";r.d(s,{C:function(){return l}});var t=r(1527),n=r(959),o=r(874),a=r.n(o);function l(e){let{variableNames:s}=e,[r,o]=(0,n.useState)(Array(s.length).fill("")),l=()=>{let e=s.map((e,s)=>"".concat(e.key,"=").concat(r[s])).join("\n");a()(e)},i=(e,s)=>{let t=[...r];t[e]=s,o(t)};return(0,t.jsxs)("div",{className:"p-4 mt-2",children:[s.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,t.jsx)("input",{type:"text",className:"border rounded px-2 py-2 w-1/2 bg-transparent focus:outline-none focus:border-black hover:border-white-400 transition duration-300 font-[400] font-sans text-sm cursor-not-allowed dark:border-gray-700 dark:text-gray-300",value:e.name||e.key,"data-tip":e.key,onMouseOver:e=>{e.target.style.color="transparent",setTimeout(()=>{e.target.style.color="inherit",e.target.value=e.target.dataset.tip},300)},onMouseLeave:s=>{s.target.style.color="transparent",setTimeout(()=>{s.target.style.color="inherit",s.target.value=e.name||e.key},300)},disabled:!0}),(0,t.jsx)("input",{type:"text",className:"border rounded px-2 py-2 w-1/2 focus:outline-none focus:border-black hover:border-gray-400 transition duration-300 font-[400] font-sans text-sm dark:border-gray-700 dark:text-gray-300",style:{outline:"none",boxShadow:"none"},placeholder:"Enter value...",value:r[s],onChange:e=>i(s,e.target.value)})]},"".concat(e.key))),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"sr-only",children:"环境变量配置"}),(0,t.jsx)("button",{type:"button",className:"border bg-black w-full text-white px-4 py-2 rounded-lg text-sm transform transition-all duration-300 focus:outline-none hover:bg-gray-700 dark:border-gray-700 dark:text-gray-300",onClick:l,children:"复制"})]})]})}},3380:function(e,s,r){"use strict";r.d(s,{G:function(){return n}});var t=r(1527);function n(e){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M12.71 8.29a1 1 0 0 0-.33-.21a1 1 0 0 0-.76 0a1 1 0 0 0-.33.21l-3 3a1 1 0 0 0 1.42 1.42l1.29-1.3V15a1 1 0 0 0 2 0v-3.59l1.29 1.3a1 1 0 0 0 1.42 0a1 1 0 0 0 0-1.42ZM12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2Zm0 18a8 8 0 1 1 8-8a8 8 0 0 1-8 8Z"})})}},4106:function(e,s,r){"use strict";r.d(s,{D:function(){return n}});var t=r(1527);function n(e){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",...e,children:(0,t.jsx)("path",{fill:"currentColor",d:"M18 10.82a1 1 0 0 0-1 1V19a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h7.18a1 1 0 0 0 0-2H5a3 3 0 0 0-3 3v11a3 3 0 0 0 3 3h11a3 3 0 0 0 3-3v-7.18a1 1 0 0 0-1-1Zm3.92-8.2a1 1 0 0 0-.54-.54A1 1 0 0 0 21 2h-6a1 1 0 0 0 0 2h3.59L8.29 14.29a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0L20 5.41V9a1 1 0 0 0 2 0V3a1 1 0 0 0-.08-.38Z"})})}},5922:function(e,s,r){"use strict";r.r(s);var t=r(1527),n=r(985),o=r(6736);r(8823);var a=r(5032),l=r(4106),i=r(3380),c=r(8537);function d(e){let s=Object.assign({h1:"h1",h3:"h3",p:"p",pre:"pre",code:"code",span:"span",blockquote:"blockquote",ul:"ul",li:"li",strong:"strong",a:"a",h2:"h2"},(0,o.ah)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{children:"Docker 部署"}),"\n","\n",(0,t.jsxs)(a.Rg,{children:[(0,t.jsx)(s.h3,{id:"安装-docker",children:"安装 Docker"}),(0,t.jsx)(s.p,{children:"如果你的服务器在国内，建议使用阿里云的镜像加速，安装命令如下："}),(0,t.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,t.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-fsSL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://get.docker.com"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-s"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"docker"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--mirror"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"Aliyun"})]})})}),(0,t.jsx)(s.p,{children:"在国外，可以直接使用官方脚本安装："}),(0,t.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,t.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-fsSL"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://get.docker.com"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bash"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-s"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"docker"})]})})}),(0,t.jsx)(s.p,{children:"如果您成功安装了 Docker 和 Docker-Compose，可以通过以下命令查看版本："}),(0,t.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,t.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-v"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"version"})]})]})}),(0,t.jsx)(s.h3,{id:"拉取配置文件",children:"拉取配置文件"}),(0,t.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,t.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"&&"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"mkdir"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-p"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"mx-space/core"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"&&"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" $_"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# 拉取 docker-compose.yml 文件"})}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"wget"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://fastly.jsdelivr.net/gh/mx-space/core@master/docker-compose.yml"})]})]})}),(0,t.jsx)(s.h3,{id:"配置-core-启动配置文件",children:"配置 Core 启动配置文件"}),(0,t.jsxs)(s.p,{children:["在下方的表格里填入你的配置，然后点击复制，创建一个 ",(0,t.jsx)(s.code,{children:".env"})," 文件，将复制的内容粘贴进去，保存即可。"]}),(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"鼠标悬停在下方的表格中，可以查看对应的配置项名字。"}),"\n"]}),(0,t.jsx)(c.C,{variableNames:[{key:"JWT_SECRET",name:"[JWT 密钥] 长度不小于 16 个字符，不大于 32 个字符"},{key:"ALLOWED_ORIGINS",name:"[被允许的域名] 如果允许多个域名访问，用英文逗号，分隔"},{key:"ENCRYPT_ENABLE",name:"[是否开启加密] true 为开启，false 为关闭"},{key:"ENCRYPT_KEY",name:"[加密密钥] 详情请见下方提示"}]}),(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"JWT 密钥"})}),"：需要填写长度不小于 16 个字符，不大于 32 个字符的字符串，用于加密用户的 JWT，务必保存好自己的密钥，不要泄露给他人。"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"被允许的域名"})}),"：需要填写被允许的域名，通常是前端的域名，如果允许多个域名访问，用英文逗号，分隔。"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"是否开启加密"})}),"：如果你确定要开启加密，将 false 改为 true，开启加密后，你需要在下方填写加密密钥。"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"加密密钥"})}),"：如果你不知道这是什么，那么不建议开启此功能，具体内容可参考 ",(0,t.jsx)(s.a,{href:"https://mx-space.js.org/usage/security.html",children:"https://mx-space.js.org/usage/security.html"})]}),"\n"]}),(0,t.jsxs)(a.UW,{type:"warning",children:[(0,t.jsxs)(s.p,{children:["若开启加密，则需注意密钥长度",(0,t.jsx)(s.strong,{children:"必须为 64 位且只有小写字母和数字"}),"，不然会在初始化时报错。注意这是",(0,t.jsx)(s.strong,{children:"不可逆"}),"的，务必保存自己的秘钥。所以并不是非常推荐使用，除非你真的需要加密\nAPI Key."]}),(0,t.jsxs)(s.p,{children:["密钥可以通过 ",(0,t.jsx)(s.code,{children:"openssl rand -hex 32"})," 命令生成。请务必牢记。"]})]}),(0,t.jsx)(s.h3,{id:"启动-core",children:"启动 Core"}),(0,t.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,t.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"docker"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"compose"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),(0,t.jsx)(s.h3,{id:"完成",children:"完成"}),(0,t.jsxs)(s.p,{children:["恭喜你完成了 Core 部署，不过仅仅如此是不够的，你需要配置好反向代理之后登录后台进行初始化，这里不再赘述。除此之外，如引言所述还需要部署一个",(0,t.jsx)(s.strong,{children:"前端"}),"主题用于展示，请参考 ",(0,t.jsx)(s.a,{href:"https://mx-space.js.org/themes",children:"前端主题文档"})," 继续完成部署前端主题的步骤。"]})]}),"\n",(0,t.jsx)(s.h2,{id:"相关链接",children:"相关链接"}),"\n",(0,t.jsxs)(a.oy,{num:2,children:[(0,t.jsx)(a.Zb,{arrow:!0,title:"反向代理配置",href:"/docs/extra#反向代理",icon:(0,t.jsx)(l.D,{})}),(0,t.jsx)(a.Zb,{arrow:!0,title:"前端主题部署",href:"/themes",icon:(0,t.jsx)(l.D,{})}),(0,t.jsx)(a.Zb,{arrow:!0,title:"使用指南",href:"/usage",icon:(0,t.jsx)(i.G,{})})]})]})}s.default=(0,n.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)},pageOpts:{filePath:"pages/docs/docker.mdx",route:"/docs/docker",headings:[{depth:1,value:"Docker 部署",id:"docker-部署"},{depth:3,value:"安装 Docker",id:"安装-docker"},{depth:3,value:"拉取配置文件",id:"拉取配置文件"},{depth:3,value:"配置 Core 启动配置文件",id:"配置-core-启动配置文件"},{depth:3,value:"启动 Core",id:"启动-core"},{depth:3,value:"完成",id:"完成"},{depth:2,value:"相关链接",id:"相关链接"}],title:"Docker 部署"},pageNextRoute:"/docs/docker"})},6935:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var s=document.activeElement,r=[],t=0;t<e.rangeCount;t++)r.push(e.getRangeAt(t));switch(s.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":s.blur();break;default:s=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach(function(s){e.addRange(s)}),s&&s.focus()}}}},function(e){e.O(0,[985,774,888,179],function(){return e(e.s=5539)}),_N_E=e.O()}]);